#
# Test UDFs
#

# myvector_construct and myvector_display
SELECT myvector_construct("[1,2,3");
ERROR 42000: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '2,3' at line 1
SELECT myvector_construct("[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17]");
ERROR 42000: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17]' at line 1
SELECT myvector_display(myvector_construct("[]"));
myvector_display(myvector_construct("[]"))
[]
SELECT myvector_display(myvector_construct("[1,2,3]"));
myvector_display(myvector_construct("[1,2,3]"))
[1, 2, 3]
SELECT myvector_display(myvector_construct("[1.1,2.2,3.3]"));
myvector_display(myvector_construct("[1.1,2.2,3.3]"))
[1.1, 2.2, 3.3]

# myvector_distance
SELECT myvector_distance(myvector_construct("[1,2]"), myvector_construct("[1,2]"), 'INVALID');
ERROR HY000: Invalid distance metric
SELECT myvector_distance(myvector_construct("[1,2]"), myvector_construct("[1,2,3]"), 'L2');
ERROR HY000: Vectors of different lengths
SELECT myvector_distance(myvector_construct("[1,2]"), myvector_construct("[1,3]"), 'L2');
myvector_distance(myvector_construct("[1,2]"), myvector_construct("[1,3]"), 'L2')
1
SELECT myvector_distance(myvector_construct("[1,2]"), myvector_construct("[1,3]"), 'IP');
myvector_distance(myvector_construct("[1,2]"), myvector_construct("[1,3]"), 'IP')
7
SELECT myvector_distance(myvector_construct("[1,2]"), myvector_construct("[2,4]"), 'COSINE');
myvector_distance(myvector_construct("[1,2]"), myvector_construct("[2,4]"), 'COSINE')
0

# myvector_is_valid
SELECT myvector_is_valid(myvector_construct("[]"));
myvector_is_valid(myvector_construct("[]"))
1
SELECT myvector_is_valid(myvector_construct("[1,2,3]"));
myvector_is_valid(myvector_construct("[1,2,3]"))
1
SELECT myvector_is_valid(myvector_construct("[1.1,2.2,3.3]"));
myvector_is_valid(myvector_construct("[1.1,2.2,3.3]"))
1
SELECT myvector_is_valid("not a vector");
myvector_is_valid("not a vector")
0
